
(function(b){var a=(function(){var e,c,d={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(e in d){if(e in document){c=d[e];break}}return function(f){if(f){document.addEventListener(c,f)}return !document[e]}})();b.fn.TabWindowVisibilityManager=function(c){var e={onFocusCallback:function(){},onBlurCallback:function(){}};var g=b.extend(e,c);var d=(document.documentMode===undefined),f=window.chrome;this.each(function(){a(function(){if(a()){setTimeout(function(){g.onFocusCallback()},300)}else{g.onBlurCallback()}});if(d&&!f){b(window).on("focusin",function(){setTimeout(function(){g.onFocusCallback()},300)}).on("focusout",function(){g.onBlurCallback()})}else{if(window.addEventListener){window.addEventListener("focus",function(h){setTimeout(function(){g.onFocusCallback()},300)},false);window.addEventListener("blur",function(h){g.onBlurCallback()},false)}else{window.attachEvent("focus",function(h){setTimeout(function(){g.onFocusCallback()},300)});window.attachEvent("blur",function(h){g.onBlurCallback()})}}});return this}})(jQuery);